# 和声游戏 - 用户指南

## 欢迎使用和声游戏！

这是一个基于《斯波索宾和声学教程》的互动式音乐理论学习应用。通过完成练习题，你将学习和掌握四声部和声写作的基本规则。

## 快速开始

### 1. 安装依赖

如果你还没有安装依赖，请在项目目录下运行：

```cmd
npm install
```

### 2. 启动应用

```cmd
npm run dev
```

应用将在浏览器中打开，地址为: http://localhost:5173/

### 3. 开始学习

首次打开应用时，你将看到关卡选择界面。选择第一个关卡开始你的和声学习之旅！

## 界面介绍

### 主界面

应用主界面包含三个部分：

1. **头部**
   - 标题: "和声游戏"
   - 分数显示: 显示你的累计分数
   - 当前关卡: 显示你正在进行的关卡

2. **主内容区**
   - 关卡选择界面（初始状态）
   - 练习题界面（选择关卡后）

3. **页脚**
   - 项目说明

### 关卡选择界面

关卡选择界面显示所有60个关卡，按章节组织：

#### 关卡状态
- **绿色**: 已完成的关卡
- **蓝色**: 已解锁但未完成的关卡
- **灰色**: 尚未解锁的关卡
- **脉动动画**: 当前正在进行的关卡

#### 统计面板
- 总关卡数: 60
- 已完成: 显示你已完成的关卡数
- 已解锁: 显示你可以访问的关卡数
- 总分数: 显示你的累计分数

#### 图例
- 🟢 已完成
- 🔵 已解锁
- ⚫ 已锁定
- 💫 当前关卡

### 练习题界面

选择关卡后，你将进入练习题界面：

#### 练习题信息
- 练习题编号（如 "1-1"）
- 章节标题（如 "第1章: 三和弦的连接"）
- 练习题说明

#### 五线谱显示
- 显示当前的和弦进行
- 高音谱号（女高音、女低音）
- 低音谱号（男高音、男低音）
- 自动显示升降号

#### 和弦编辑器
- 显示所有和弦
- 点击和弦进行编辑
- 点击 "+" 添加新和弦
- 点击 "×" 删除和弦

#### 音符输入面板
选择和弦后，你可以编辑四个声部的音符：

- **女高音（Soprano）**: 最高声部
- **女低音（Alto）**: 次高声部
- **男高音（Tenor）**: 次低声部
- **男低音（Bass）**: 最低声部

每个声部可以设置：
- 音高（C, D, E, F, G, A, B）
- 变音记号（♮自然, ♯升, ♭降）
- 八度（3-6）

#### 错误显示
如果你的和弦进行有错误，将显示错误列表：

- 错误规则名称
- 错误说明
- 受影响的声部
- 受影响的和弦
- 章节引用

点击错误可以高亮显示相关的音符。

#### 操作按钮
- **提交**: 验证你的和弦进行
- **显示答案**: 查看参考答案
- **跳过**: 跳过当前练习题
- **返回关卡选择**: 返回关卡选择界面

## 游戏规则

### 关卡系统

1. **关卡数量**: 共60个关卡，对应30章内容（每章2个练习题）

2. **解锁机制**: 
   - 第一关默认解锁
   - 完成当前关卡后，下一关自动解锁
   - 必须按顺序完成关卡

3. **完成条件**:
   - 提交的和弦进行必须通过所有规则验证
   - 没有平行五度、平行八度等错误
   - 所有音符在声部范围内
   - 满足练习题的约束条件

### 分数系统

1. **得分规则**:
   - 完成练习题获得分数
   - 分数根据练习题难度计算
   - 分数只增不减

2. **错误处理**:
   - 提交错误的和弦进行不会扣分
   - 可以多次尝试直到正确
   - 跳过练习题不会获得分数

### 进度保存

1. **自动保存**:
   - 完成练习题后自动保存
   - 提交和弦进行后自动保存
   - 无需手动保存

2. **进度加载**:
   - 应用启动时自动加载进度
   - 保留分数、完成状态、解锁状态
   - 数据存储在浏览器本地

## 学习建议

### 初学者

1. **从第一关开始**: 按顺序完成关卡，循序渐进
2. **理解规则**: 仔细阅读错误提示，理解和声规则
3. **参考答案**: 遇到困难时，查看参考答案学习
4. **多次练习**: 重复练习已完成的关卡，巩固知识

### 进阶学习

1. **挑战自己**: 尝试不看答案完成练习题
2. **探索变化**: 尝试不同的和弦进行方式
3. **理解原理**: 思考为什么某些和弦进行是错误的
4. **总结规律**: 归纳和声写作的常见模式

## 和声规则说明

### 基础规则

1. **平行五度**:
   - 任意两个声部不能同时以完全五度的音程移动
   - 这是和声写作的基本禁忌

2. **平行八度**:
   - 任意两个声部不能同时以八度的音程移动
   - 同样是和声写作的基本禁忌

3. **声部交叉**:
   - 相邻声部不能交叉
   - 例如：女低音不能高于女高音

4. **声部范围**:
   - 每个声部都有合理的音域范围
   - 女高音: C4-A5
   - 女低音: G3-E5
   - 男高音: C3-G4
   - 男低音: E2-C4

### 练习题约束

每个练习题可能有特定的约束条件：

1. **必需和弦**: 必须使用的和弦
2. **禁止和弦**: 不能使用的和弦
3. **最小长度**: 和弦进行的最小长度
4. **最大长度**: 和弦进行的最大长度

## 常见问题

### Q: 如何添加新和弦？
A: 点击和弦编辑器中的 "+" 按钮，然后编辑四个声部的音符。

### Q: 如何删除和弦？
A: 点击和弦上的 "×" 按钮。

### Q: 为什么我的和弦进行有错误？
A: 查看错误显示面板，了解具体的错误原因。常见错误包括平行五度、平行八度、声部交叉等。

### Q: 如何查看参考答案？
A: 点击 "显示答案" 按钮。注意：查看答案后仍然可以提交自己的答案。

### Q: 我的进度会保存吗？
A: 是的，进度会自动保存到浏览器本地存储。关闭浏览器后再打开，进度会自动恢复。

### Q: 如何重置进度？
A: 目前没有重置功能。如果需要重置，可以清除浏览器的本地存储数据。

### Q: 为什么某些关卡是灰色的？
A: 灰色关卡是尚未解锁的。你需要按顺序完成前面的关卡才能解锁。

### Q: 可以跳过困难的练习题吗？
A: 可以点击 "跳过" 按钮，但跳过的练习题不会获得分数，也不会解锁下一关。

## 技术支持

### 浏览器兼容性
- Chrome 90+
- Firefox 88+
- Safari 14+
- Edge 90+

### 系统要求
- 现代浏览器
- 启用 JavaScript
- 启用 LocalStorage

### 性能优化
- 建议使用桌面浏览器获得最佳体验
- 移动端浏览器也支持，但界面可能较小

## 开发者信息

### 运行测试
```cmd
npm test
```

### 构建生产版本
```cmd
npm run build
```

### 查看代码
项目代码完全开源，你可以查看和学习：
- 源代码: `src/` 目录
- 测试代码: `*.test.ts` 和 `*.prop.test.tsx` 文件
- 文档: `*.md` 文件

## 学习资源

### 推荐书籍
- 《斯波索宾和声学教程》（原版）
- 其他和声学教材

### 在线资源
- 音乐理论网站
- 和声学习视频
- 音乐论坛

## 反馈与建议

如果你在使用过程中遇到问题或有改进建议，欢迎反馈！

## 版本信息

- **版本**: 1.0.0
- **发布日期**: 2026-01-15
- **技术栈**: React + TypeScript + VexFlow
- **许可证**: MIT

---

祝你学习愉快！🎵🎹

如果你觉得这个应用有帮助，请分享给其他学习和声的朋友！
